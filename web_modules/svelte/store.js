import{noop as h,safe_not_equal as k}from"./internal.js";const d=[];function l(e,m=h){let g;const b=[];function i(c){if(k(e,c)){e=c;if(g){const j=!d.length;for(let a=0;a<b.length;a+=1){const f=b[a];f[1](),d.push(f,e)}if(j){for(let a=0;a<d.length;a+=2)d[a][0](d[a+1]);d.length=0}}}}function n(c){i(c(e))}function o(c,j=h){const a=[c,j];return b.push(a),b.length===1&&(g=m(i)||h),c(e),()=>{const f=b.indexOf(a);f!==-1&&b.splice(f,1),b.length===0&&(g(),g=null)}}return{set:i,update:n,subscribe:o}}export{l as writable};
