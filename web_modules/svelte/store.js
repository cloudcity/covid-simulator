import{noop as c,safe_not_equal as b}from"./internal.js";const s=[];function h(e,f=c){let o;const i=[];function a(n){if(b(e,n)&&(e=n,o)){const u=!s.length;for(let t=0;t<i.length;t+=1){const r=i[t];r[1](),s.push(r,e)}if(u){for(let t=0;t<s.length;t+=2)s[t][0](s[t+1]);s.length=0}}}function l(n){a(n(e))}function p(n,u=c){const t=[n,u];return i.push(t),i.length===1&&(o=f(a)||c),n(e),()=>{const r=i.indexOf(t);r!==-1&&i.splice(r,1),i.length===0&&(o(),o=null)}}return{set:a,update:l,subscribe:p}}export{h as writable};
