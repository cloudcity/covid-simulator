import{n as f,s as b}from"../common/index-41f7deaa.js";const n=[];function d(e,u=f){let r;const s=[];function a(i){if(b(e,i)&&(e=i,r)){const c=!n.length;for(let t=0;t<s.length;t+=1){const o=s[t];o[1](),n.push(o,e)}if(c){for(let t=0;t<n.length;t+=2)n[t][0](n[t+1]);n.length=0}}}function l(i){a(i(e))}function p(i,c=f){const t=[i,c];return s.push(t),s.length===1&&(r=u(a)||f),i(e),()=>{const o=s.indexOf(t);o!==-1&&s.splice(o,1),s.length===0&&(r(),r=null)}}return{set:a,update:l,subscribe:p}}export{d as writable};
