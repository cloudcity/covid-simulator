import"./CovidGraph.css.proxy.js";import{SvelteComponent as Q,append as b,attr as g,binding_callbacks as R,detach as S,element as h,init as T,insert as U,noop as L,safe_not_equal as V,set_data as E,space as z,text as m}from"../web_modules/svelte/internal.js";import"../web_modules/svelte.js";import"../web_modules/svelte/store.js";import W from"../web_modules/vega-embed.js";import M from"./model.js";function X(c){let f,e,n,k,A,d,B,v,o,p,q,r=c[1][0]+"",l,w,s,F,x,a=c[1][1]+"",i,y,j,N,G,H=c[1][2]+"",J,O,D,P,I,K;return{c(){f=h("div"),e=h("div"),n=z(),k=h("section"),k.textContent="The simulation begins on day zero with 1,000 people infected, 1,000 people exposed, and 1 million people total.",A=z(),d=h("section"),B=h("p"),B.innerHTML='<span class="big svelte-1okghyu">Deaths</span> per million',v=z(),o=h("p"),p=m("< 19 years old"),q=h("span"),l=m(r),w=z(),s=h("p"),F=m("20 - 59 years old"),x=h("span"),i=m(a),y=z(),j=h("p"),N=m("60+ years old"),G=h("span"),J=m(H),O=z(),D=h("p"),P=m("Total "),I=h("span"),K=m(c[2]),g(e,"class","covid-graph-vega svelte-1okghyu"),g(k,"class","footnote svelte-1okghyu"),g(B,"class","svelte-1okghyu"),g(q,"class","big svelte-1okghyu"),g(o,"class","svelte-1okghyu"),g(x,"class","big svelte-1okghyu"),g(s,"class","svelte-1okghyu"),g(G,"class","big svelte-1okghyu"),g(j,"class","svelte-1okghyu"),g(I,"class","big svelte-1okghyu"),g(D,"class","total svelte-1okghyu"),g(d,"class","numbers svelte-1okghyu"),g(f,"class","covid-graph-container svelte-1okghyu")},m(t,C){U(t,f,C),b(f,e),c[14](e),b(f,n),b(f,k),b(f,A),b(f,d),b(d,B),b(d,v),b(d,o),b(o,p),b(o,q),b(q,l),b(d,w),b(d,s),b(s,F),b(s,x),b(x,i),b(d,y),b(d,j),b(j,N),b(j,G),b(G,J),b(d,O),b(d,D),b(D,P),b(D,I),b(I,K)},p(t,[C]){C&2&&r!==(r=t[1][0]+"")&&E(l,r),C&2&&a!==(a=t[1][1]+"")&&E(i,a),C&2&&H!==(H=t[1][2]+"")&&E(J,H),C&4&&E(K,t[2])},i:L,o:L,d(t){t&&S(f),c[14](null)}}}function Y(c,f,e){let{compartment:n}=f,{region:k}=f,{interventions:A}=f,{days:d}=f,B,v,o=[],p={},q,r=[],l={},w={};function s(a,i){let y={Infected:"Currently infected per million",Dead:"Cumulative deaths per million"}[i],j=a[i];return{config:{view:{continuousWidth:400,continuousHeight:300},axis:{titleFont:"Karla",titleFontSize:13,labelFont:"Karla",labelFontSize:13}},data:{name:"seriesData"},mark:{type:"line",clip:!0,strokeWidth:4,color:{x1:1,y1:1,x2:1,y2:0,gradient:"linear",stops:[{offset:0,color:"#F0883F"},{offset:1,color:"#D31408"}]}},encoding:{x:{type:"quantitative",axis:{title:"Day",titleFontSize:13,titleFontWeight:"normal",labelFlush:!1},field:"days",scale:{domain:[0,d]}},y:{type:"quantitative",axis:{title:y,titleFontWeight:"normal",titleFontSize:13},field:"pop",scale:{domain:[0,j]}}},$schema:"https://vega.github.io/schema/vega-lite/v4.8.1.json",width:"container",height:300,autosize:{type:"fit",contains:"padding"},padding:{bottom:10},background:"#F7F7F8"}}function F(a){R[a?"unshift":"push"](()=>{e(0,v=a)})}c.$set=a=>{"compartment"in a&&e(3,n=a.compartment),"region"in a&&e(4,k=a.region),"interventions"in a&&e(5,A=a.interventions),"days"in a&&e(6,d=a.days)};let x;return c.$$.update=()=>{if(c.$$.dirty&112){u:e(7,p=M.generateData(k,A,d))}if(c.$$.dirty&8){u:e(8,q=n==="Infected"?"Combined Infected":n)}if(c.$$.dirty&384){u:e(9,r=p[q].map((a,i)=>({days:i,pop:Math.round(a)})))}if(c.$$.dirty&128){u:e(1,o=p.cohortDeaths.map(Math.round).map(a=>a.toLocaleString()))}if(c.$$.dirty&128){u:e(2,x=Math.round(p.cohortDeaths.reduce((a,i)=>a+i)).toLocaleString())}if(c.$$.dirty&80){u:{let a=M.generateData(k,{},d);e(10,l={});for(let i in a)e(10,l[i]=a[i].reduce((y,j)=>y>j?y:j),l)}}if(c.$$.dirty&1096){u:e(11,w=s(l,n,d))}if(c.$$.dirty&2561){u:v&&w&&W(v,w).then(a=>a.view.insert("seriesData",r).run()).catch(console.error)}},[v,o,x,n,k,A,d,p,q,r,l,w,B,s,F]}class Z extends Q{constructor(c){super();T(this,c,Y,X,V,{compartment:3,region:4,interventions:5,days:6})}}export default Z;
