import"./CovidGraph.css.proxy.js";import{SvelteComponent as A,append as t,attr as l,binding_callbacks as B,detach as J,element as r,init as O,insert as P,noop as K,safe_not_equal as Q,set_data as q,space as T,text as b}from"../web_modules/svelte/internal.js";import"../web_modules/svelte.js";import"../web_modules/svelte/store.js";import R from"../web_modules/vega-embed.js";import N from"./model.js";function U(o){let s,n,m,c,F,a,w,C,h,g,p,y=o[1][0]+"",u,k,v,z,D,e=o[1][1]+"",i,_,d,H,M,W=o[1][2]+"",E,I,j,L,x,G;return{c(){s=r("div"),n=r("div"),m=T(),c=r("section"),c.textContent="The simulation begins on day zero with 1,000 people infected, 1,000 people exposed, and 1 million people total.",F=T(),a=r("section"),w=r("p"),w.innerHTML='<span class="big svelte-1okghyu">Deaths</span> per million',C=T(),h=r("p"),g=b("< 19 years old"),p=r("span"),u=b(y),k=T(),v=r("p"),z=b("20 - 59 years old"),D=r("span"),i=b(e),_=T(),d=r("p"),H=b("60+ years old"),M=r("span"),E=b(W),I=T(),j=r("p"),L=b("Total "),x=r("span"),G=b(o[2]),l(n,"class","covid-graph-vega svelte-1okghyu"),l(c,"class","footnote svelte-1okghyu"),l(w,"class","svelte-1okghyu"),l(p,"class","big svelte-1okghyu"),l(h,"class","svelte-1okghyu"),l(D,"class","big svelte-1okghyu"),l(v,"class","svelte-1okghyu"),l(M,"class","big svelte-1okghyu"),l(d,"class","svelte-1okghyu"),l(x,"class","big svelte-1okghyu"),l(j,"class","total svelte-1okghyu"),l(a,"class","numbers svelte-1okghyu"),l(s,"class","covid-graph-container svelte-1okghyu")},m(f,S){P(f,s,S),t(s,n),o[14](n),t(s,m),t(s,c),t(s,F),t(s,a),t(a,w),t(a,C),t(a,h),t(h,g),t(h,p),t(p,u),t(a,k),t(a,v),t(v,z),t(v,D),t(D,i),t(a,_),t(a,d),t(d,H),t(d,M),t(M,E),t(a,I),t(a,j),t(j,L),t(j,x),t(x,G)},p(f,[S]){S&2&&y!==(y=f[1][0]+"")&&q(u,y),S&2&&e!==(e=f[1][1]+"")&&q(i,e),S&2&&W!==(W=f[1][2]+"")&&q(E,W),S&4&&q(G,f[2])},i:K,o:K,d(f){f&&J(s),o[14](null)}}}function V(o,s,n){let{compartment:m}=s,{region:c}=s,{interventions:F}=s,{days:a}=s,w,C,h=[],g={},p,y=[],u={},k={};function v(e,i){let _={Infected:"Currently infected per million",Dead:"Cumulative deaths per million"}[i],d=e[i];return{config:{view:{continuousWidth:400,continuousHeight:300},axis:{titleFont:"Karla",titleFontSize:13,labelFont:"Karla",labelFontSize:13}},data:{name:"seriesData"},mark:{type:"line",clip:!0,strokeWidth:4,color:{x1:1,y1:1,x2:1,y2:0,gradient:"linear",stops:[{offset:0,color:"#F0883F"},{offset:1,color:"#D31408"}]}},encoding:{x:{type:"quantitative",axis:{title:"Day",titleFontSize:13,titleFontWeight:"normal",labelFlush:!1},field:"days",scale:{domain:[0,a]}},y:{type:"quantitative",axis:{title:_,titleFontWeight:"normal",titleFontSize:13},field:"pop",scale:{domain:[0,d]}}},$schema:"https://vega.github.io/schema/vega-lite/v4.8.1.json",width:"container",height:300,autosize:{type:"fit",contains:"padding"},padding:{bottom:10},background:"#F7F7F8"}}function z(e){B[e?"unshift":"push"](()=>{n(0,C=e)})}o.$set=e=>{"compartment"in e&&n(3,m=e.compartment),"region"in e&&n(4,c=e.region),"interventions"in e&&n(5,F=e.interventions),"days"in e&&n(6,a=e.days)};let D;return o.$$.update=()=>{if(o.$$.dirty&112){e:n(7,g=N.generateData(c,F,a))}if(o.$$.dirty&8){e:n(8,p=m==="Infected"?"Combined Infected":m)}if(o.$$.dirty&384){e:n(9,y=g[p].map((e,i)=>({days:i,pop:Math.round(e)})))}if(o.$$.dirty&128){e:n(1,h=g.cohortDeaths.map(Math.round).map(e=>e.toLocaleString()))}if(o.$$.dirty&128){e:n(2,D=Math.round(g.cohortDeaths.reduce((e,i)=>e+i)).toLocaleString())}if(o.$$.dirty&80){e:{let e=N.generateData(c,{},a);n(10,u={});for(let i in e)n(10,u[i]=e[i].reduce((_,d)=>_>d?_:d),u)}}if(o.$$.dirty&1096){e:n(11,k=v(u,m,a))}if(o.$$.dirty&2561){e:C&&k&&R(C,k).then(e=>e.view.insert("seriesData",y).run()).catch(console.error)}},[C,h,D,m,c,F,a,g,p,y,u,k,w,v,z]}class X extends A{constructor(o){super();O(this,o,V,U,Q,{compartment:3,region:4,interventions:5,days:6})}}export default X;
